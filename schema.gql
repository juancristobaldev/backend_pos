# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

input AuthInput {
  email: String!
  password: String!
}

type AuthPayload {
  accessToken: String!
}

type Business {
  address: String!
  clientId: ID!
  createdAt: DateTime!
  currency: String!
  floors: [Floor!]!
  id: ID!
  maxTables: Int!
  name: String!
  phone: String!
  status: String!
  taxRate: Float!
  theme: String
  updatedAt: DateTime!
}

type BusinessKpis {
  activeTables: Int!
  activeUsers: Int!
  availableProducts: Int!
  avgDaysSinceLastLogin: Float!
  avgOrdersPerUser: Float!
  avgStatusChangeTimeMinutes: Float!
  avgTicket: Float!
  avgTip: Float!
  cancellationRate: Float!
  completedOrders: Int!
  netRevenue: Float!
  tableRotationRate: Float!
  totalFloors: Int!
  totalOrders: Int!
  totalProducts: Int!
  totalRevenue: Float!
}

type BusinessKpisV2 {
  productPerformances: [ProductStat!]!
  recentTransactions: [Transaction!]!
  revenueUpdates: [RevenueChartData!]!
  totalRevenue: Float!
}

input ChangeTableStatusInput {
  newStatus: String!
  tableId: ID!
}

type Client {
  businesses: [Business!]
  createdAt: DateTime
  email: String
  id: ID!
  name: String
  password: String!
  status: String
  updatedAt: DateTime
}

type CommitSubscriptionPaymentResponse {
  clientEmail: String!
  saleToken: String!
}

input CreateBusinessInput {
  address: String!
  name: String!
  phone: String!
  theme: String
}

input CreateClientInput {
  email: String!
  name: String!
  password: String!
  saleToken: String!
}

input CreateFloorInput {
  businessId: ID!
  name: String!
}

input CreateOrderInput {
  discount: Float! = 0
  items: [CreateOrderItemInput!]!
  tableId: ID!
  tip: Float! = 0
  userId: ID!
}

input CreateOrderItemInput {
  note: String
  productId: ID!
  quantity: Int!
}

type CreatePaymentResponse {
  id: ID!
  token: String!
  webpayUrl: String!
}

input CreateProductInput {
  available: Boolean!
  businessId: ID!
  category: String!
  description: String!
  name: String!
  price: Float!
}

input CreateTableInput {
  capacity: Float!
  color: String!
  coordX: Float!
  coordY: Float!
  floorId: String!
  name: String!
  shape: String!
}

input CreateTablesBatchInput {
  floorId: ID!
  tables: [TableDataInput!]!
}

input CreateUserInput {
  businessId: ID!
  email: String!
  name: String!
  password: String!
  role: String!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

input DeleteBusinessInput {
  id: ID!
}

input DeleteClientInput {
  id: ID!
}

input DeleteFloorInput {
  id: ID!
}

input DeleteOrderInput {
  id: ID!
}

input DeleteProductInput {
  id: ID!
}

input DeleteTableInput {
  id: ID!
}

input DeleteUserInput {
  id: ID!
}

"""Estados posibles de un empleado"""
enum EmployeeStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
}

type Floor {
  businessId: ID!
  createdAt: DateTime!
  id: ID!
  name: String!
  tables: [Table!]
  updatedAt: DateTime!
}

type Mutation {
  changeTableStatus(input: ChangeTableStatusInput!): Table!
  commitSubscriptionPayment(token: String!): CommitSubscriptionPaymentResponse!
  createBusiness(input: CreateBusinessInput!): OutputClient!
  createClient(input: CreateClientInput!): OutputClient!
  createFloor(createFloorInput: CreateFloorInput!): Business!
  createOrder(input: CreateOrderInput!): Table!
  createProduct(input: CreateProductInput!): OutputProduct!
  createSaleFromTableOrders(businessId: ID!, tableId: ID!, userId: ID!): Table!
  createSubscriptionPayment(amount: Int!, clientEmail: String!, returnUrl: String!, subscriptionId: String!): CreatePaymentResponse!
  createTables(input: CreateTablesBatchInput!): [Table!]!
  createUser(input: CreateUserInput!): User!
  deleteBusiness(input: DeleteBusinessInput!): ID!
  deleteClient(input: DeleteClientInput!): ID!
  deleteFloor(deleteFloorInput: DeleteFloorInput!): Floor!
  deleteOrder(input: DeleteOrderInput!): ID!
  deleteProduct(input: DeleteProductInput!): ID!
  deleteTable(input: DeleteTableInput!): ID!
  deleteUser(input: DeleteUserInput!): ID!
  loginClient(input: AuthInput!): AuthPayload!
  loginUser(input: AuthInput!): AuthPayload!
  manageFloorTables(input: TableBatchUpdateInput!): Boolean!
  updateBusiness(input: UpdateBusinessInput!): Business!
  updateClient(input: UpdateClientInput!): Client!
  updateFloor(updateFloorInput: UpdateFloorInput!): Floor!
  updateOrderItems(input: UpdateOrderItemsInput!): Order!
  updateOrderStatus(input: UpdateOrderStatusInput!): Order!
  updateProduct(input: UpdateProductInput!): Product!
  updateTable(input: UpdateTableInput!): Table!
  updateUser(input: UpdateUserInput!): User!
}

type Order {
  clientEmail: String
  createdAt: DateTime!
  discount: Float!
  id: ID!
  items: [OrderItem!]
  saleId: ID
  status: String!
  subtotal: Float!
  tableId: ID
  tax: Float!
  tip: Float!
  total: Float!
  updatedAt: DateTime!
  userId: ID!
}

type OrderItem {
  id: ID!
  note: String
  orderId: ID!
  product: Product
  productId: ID!
  quantity: Int!
  total: Float!
  unitPrice: Float!
}

input OrderItemInput {
  price: Float
  productId: ID!
  quantity: Float!
}

type OutputClient {
  client: Client
  errors: String
  success: Boolean!
}

type OutputProduct {
  errors: String
  product: Product
  success: Boolean!
}

type OutputUser {
  errors: String
  success: Boolean!
  user: User
}

type PaymentStatus {
  amount: Int!
  clientEmail: String!
  createdAt: DateTime!
  referenceId: String!
  status: String!
  type: String!
}

type Product {
  available: Boolean
  businessId: ID!
  category: String
  createdAt: DateTime
  description: String
  id: ID!
  name: String
  price: Float
  updatedAt: DateTime
}

type ProductStat {
  budget: Float!
  category: String!
  id: String!
  name: String!
  percentage: Float!
  price: Float!
  priority: String!
}

type Query {
  allOrders(businessId: ID!, tableId: ID): [Order!]!
  business(id: ID!): Business!
  businessKpis(businessId: String!): BusinessKpis!
  businessKpisV2(businessId: String!): BusinessKpisV2!
  getAuthenticatedClient: Client!
  getFloors(businessId: String!): [Floor!]!
  getUser(userId: String!): OutputUser!
  order(id: ID!): Order!
  paymentStatus(paymentIntentId: String!): PaymentStatus!
  product(id: ID!): Product!
  products(businessId: ID!): [Product!]!
  table(idBusiness: ID!): [Table!]!

  """Obtiene todos los empleados de un negocio"""
  usersByBusiness(businessId: String!): [User!]!
}

type RevenueChartData {
  earnings: Float!
  expense: Float!
  month: String!
}

type Table {
  capacity: Int
  color: String
  coordX: Float
  coordY: Float
  createdAt: DateTime
  floorId: ID
  hasActiveOrder: Boolean
  id: ID!
  name: String!
  orders: [Order!]
  shape: String
  status: String
  updatedAt: DateTime
}

input TableBatchUpdateInput {
  """ID del Floor (Plano) que se est√° editando."""
  floorId: String!

  """IDs de las mesas a eliminar."""
  tableIdsToDelete: [String!]

  """Nuevas mesas a crear."""
  tablesToCreate: [CreateTableInput!]

  """Mesas existentes a actualizar (principalmente coordenadas)."""
  tablesToUpdate: [UpdateTableInputArr!]
}

input TableDataInput {
  capacity: Int!
  color: String!
  coordX: Float!
  coordY: Float!
  name: String!
  shape: String!
  status: String!
}

type Transaction {
  amount: Float!
  date: String!
  id: String!
  status: String!
  subtitle: String!
  title: String!
  type: String!
}

input UpdateBusinessInput {
  address: String
  currency: String
  id: ID!
  maxTables: Int
  name: String
  phone: String
  status: String
  taxRate: Float
  theme: String
}

input UpdateClientInput {
  email: String
  id: ID!
  name: String
  password: String
  status: String
}

input UpdateFloorInput {
  id: ID!
  name: String
}

input UpdateOrderItemsInput {
  items: [OrderItemInput!]!
  orderId: ID!
}

input UpdateOrderStatusInput {
  id: ID!
  newStatus: String!
  userId: ID!
}

input UpdateProductInput {
  available: Boolean
  category: String
  description: String
  id: ID!
  name: String
  price: Float
}

input UpdateTableInput {
  capacity: Int
  color: String
  coordX: Float
  coordY: Float
  floorId: ID
  id: ID!
  name: String
  shape: String
  status: String
}

input UpdateTableInputArr {
  coordX: Float!
  coordY: Float!
  id: String!
  name: String!
}

input UpdateUserInput {
  email: String
  id: ID!
  name: String
  password: String
  role: String
  status: EmployeeStatus
}

type User {
  businessId: ID!
  createdAt: DateTime
  email: String!
  id: ID!
  lastLogin: DateTime
  name: String!
  password: String
  role: String!
  status: EmployeeStatus!
  updatedAt: DateTime
}